# 핵심파일 형상관리 헌장 V1.0

**제정일**: 2025년 8월 4일 월요일 08:57 KST  
**제정자**: 조대표님 (총괄)  
**기술설계**: 노팀장 (기술팀장)  
**적용대상**: 노팀장, 코코치, 서대리  
**목적**: app.py 등 핵심파일의 체계적 관리 및 오류 방지

---

## 🎯 **문제점 분석**

### **서대리가 오류에 빠진 이유**
```
1. 동일 파일 반복 수정: app.py 한 개 파일로 모든 작업
2. 백업 체계 부재: 정상 상태 보존 실패
3. 의존성 누적: 외부 모듈 추가로 복잡성 증가
4. 단계별 검증 부재: 수정 후 즉시 테스트 미실시
5. 롤백 계획 부재: 문제 발생 시 복구 방법 없음
```

### **현재 상황의 심각성**
- **정상 작동 코드**: 어느 순간 "누더기"로 변질
- **복구 어려움**: 언제부터 문제인지 추적 불가
- **개발 중단**: 오류 해결에 시간 소모
- **팀 신뢰도**: 서대리 혼란 가중

---

## 📋 **핵심파일 형상관리 원칙**

### **황금 규칙 3원칙**
```
1. 🛡️ 절대 원본 보호: 정상 작동 파일은 절대 직접 수정 금지
2. 🔄 단계별 백업: 모든 수정 전 백업 생성 필수
3. ✅ 즉시 검증: 수정 후 반드시 테스트 완료 후 다음 단계
```

### **핵심파일 정의**
```
🔴 Critical Files (절대 보호):
- app.py (Flask 메인 애플리케이션)
- requirements.txt (패키지 의존성)
- ins_master_db.csv (문제 데이터)

🟡 Important Files (중요 보호):
- templates/*.html (UI 템플릿)
- static/ 폴더 (CSS, JS, 이미지)
- 설정 파일들

🟢 Working Files (작업용):
- 백업 파일들
- 임시 파일들
- 테스트 파일들
```

---

## 🔄 **단계별 형상관리 프로세스**

### **Phase 1: 작업 시작 전 (필수)**

#### **1-1. 현재 상태 백업**
```bash
# 날짜시간 기반 백업명 생성
copy app.py app_STABLE_$(date +%Y%m%d_%H%M).py

# 백업 확인
dir app_STABLE_*.py

# 백업 태그 추가
echo "# STABLE BACKUP - $(date)" >> app_STABLE_$(date +%Y%m%d_%H%M).py
```

#### **1-2. 작업용 파일 생성**
```bash
# 작업용 파일 생성 (원본 보호)
copy app_STABLE_$(date +%Y%m%d_%H%M).py app_WORK_$(date +%Y%m%d_%H%M).py

# 작업용에서만 수정 작업
# 원본 app.py는 절대 직접 수정 금지
```

#### **1-3. 작업 목표 명확화**
```
작업명: [구체적 작업 내용]
예상시간: [분 단위]
성공기준: [명확한 달성 기준]
롤백기준: [실패 판단 기준]
```

### **Phase 2: 작업 중 (단계별)**

#### **2-1. 소단위 수정**
```bash
# 50줄 이하 단위로만 수정
# 각 수정 후 즉시 저장 및 백업
copy app_WORK_$(date +%Y%m%d_%H%M).py app_STEP1_$(date +%Y%m%d_%H%M).py
```

#### **2-2. 즉시 테스트**
```bash
# 각 단계별 테스트 필수
python app_WORK_$(date +%Y%m%d_%H%M).py

# 정상 작동 확인 후 다음 단계
# 오류 발생 시 즉시 이전 단계로 롤백
```

#### **2-3. 단계별 체크포인트**
```
Step 1: [1단계 수정] → 테스트 → 백업
Step 2: [2단계 수정] → 테스트 → 백업  
Step 3: [3단계 수정] → 테스트 → 백업
```

### **Phase 3: 작업 완료 후 (검증)**

#### **3-1. 최종 통합 테스트**
```bash
# 전체 기능 테스트
# 모든 API 엔드포인트 확인
# UI 정상 작동 확인
```

#### **3-2. 검증 완료 후 배포**
```bash
# 검증 완료된 작업용 파일을 정식으로 배포
copy app_WORK_$(date +%Y%m%d_%H%M).py app.py

# 새로운 STABLE 버전 생성
copy app.py app_STABLE_$(date +%Y%m%d_%H%M)_VERIFIED.py
```

#### **3-3. 정리 및 문서화**
```bash
# 작업 완료 보고서 작성
# 변경 사항 문서화
# 다음 작업자를 위한 가이드 업데이트
```

---

## 👥 **역할별 책임사항**

### **🔧 노팀장 (기술팀장)**
```
📋 역할:
- 형상관리 프로세스 설계 및 감독
- 백업 전략 수립 및 검증
- 롤백 절차 정의 및 실행 지원

🛡️ 책임:
- STABLE 버전 품질 보증
- 서대리 작업 가이드라인 제공
- 긴급 복구 시나리오 준비

⚡ 대응:
- 서대리 오류 발생 시 즉시 기술 지원
- 백업 파일 검증 및 복구 지원
- 프로세스 개선 제안
```

### **📋 코코치 (기획팀장)**
```
📊 역할:
- 형상관리 프로세스 문서화
- 작업 진행 상황 추적 관리
- 백업 파일 메타데이터 관리

📈 책임:
- 각 버전별 변경 사항 기록
- 작업 일정 및 우선순위 관리
- 팀 간 커뮤니케이션 조율

📝 대응:
- 형상관리 헌장 업데이트
- 작업 보고서 자동 생성
- 프로세스 준수 모니터링
```

### **💻 서대리 (개발팀장)**
```
⚙️ 역할:
- 형상관리 프로세스 엄격 준수
- 단계별 백업 및 테스트 실행
- 작업 결과 상세 보고

🎯 책임:
- 절대 원본 파일 직접 수정 금지
- 모든 수정 전 백업 생성 필수
- 각 단계별 테스트 완료 후 진행

⚠️ 준수사항:
- 50줄 이상 한번에 수정 금지
- 테스트 없이 다음 단계 진행 금지
- 오류 발생 시 즉시 보고 및 중단
```

---

## 📁 **백업 파일 명명 규칙**

### **파일명 체계**
```
app_[상태]_[날짜]_[시간]_[태그].py

예시:
- app_STABLE_20250804_0857_VERIFIED.py (검증된 안정 버전)
- app_WORK_20250804_0900_FRONTEND.py (프론트엔드 작업용)
- app_STEP1_20250804_0915_API_ADD.py (1단계 완료)
- app_EMERGENCY_20250804_0930_ROLLBACK.py (긴급 복구용)
```

### **상태 코드 정의**
```
STABLE: 검증 완료된 안정 버전
WORK: 작업 진행 중인 버전  
STEP[N]: N단계 완료 버전
EMERGENCY: 긴급 백업 버전
TEST: 테스트 전용 버전
ROLLBACK: 롤백용 버전
```

### **보존 정책**
```
🔴 STABLE 버전: 영구 보존 (삭제 금지)
🟡 WORK 버전: 30일 보존
🟢 STEP 버전: 7일 보존  
🔵 EMERGENCY 버전: 영구 보존
```

---

## ⚡ **긴급 상황 대응 절차**

### **Level 1: 경미한 오류**
```
1. 현재 작업 즉시 중단
2. 마지막 STEP 백업으로 복구
3. 오류 원인 분석 후 재작업
```

### **Level 2: 심각한 오류** 
```
1. 모든 작업 즉시 중단
2. 최신 STABLE 버전으로 롤백
3. 노팀장 즉시 보고 및 지원 요청
```

### **Level 3: 시스템 마비**
```
1. 서버 즉시 중단
2. EMERGENCY 백업으로 긴급 복구
3. 조대표님 즉시 보고
4. 전체 프로세스 재검토
```

---

## 🛠️ **자동화 도구 개발**

### **백업 자동화 스크립트**
```bash
#!/bin/bash
# auto_backup.sh

DATE=$(date +%Y%m%d_%H%M)
BACKUP_NAME="app_AUTO_${DATE}_BACKUP.py"

# 자동 백업 생성
cp app.py $BACKUP_NAME

# 백업 로그 기록
echo "$(date): Auto backup created - $BACKUP_NAME" >> backup_log.txt

echo "✅ 자동 백업 완료: $BACKUP_NAME"
```

### **테스트 자동화 스크립트**
```bash
#!/bin/bash
# auto_test.sh

echo "🔍 자동 테스트 시작..."

# Flask 서버 시작 테스트
timeout 10s python app.py &
PID=$!

sleep 5

# API 테스트
curl -s http://127.0.0.1:5000/api/status > /dev/null
if [ $? -eq 0 ]; then
    echo "✅ API 테스트 통과"
else
    echo "❌ API 테스트 실패"
fi

kill $PID
echo "🏁 자동 테스트 완료"
```

---

## 📊 **성과 측정 지표**

### **정량적 지표**
```
🎯 목표:
- 오류 발생률: 0% (월 기준)
- 복구 시간: 5분 이내
- 백업 생성률: 100% (작업 전 필수)
- 프로세스 준수율: 100%

📈 측정:
- 주간 오류 발생 횟수
- 평균 복구 소요 시간
- 백업 파일 생성 현황
- 프로세스 위반 사례
```

### **정성적 지표**
```
✅ 서대리 안정성: 오류 없는 지속적 개발
✅ 팀 신뢰도: 예측 가능한 개발 일정
✅ 코드 품질: 체계적 관리로 품질 향상
✅ 개발 효율: 디버깅 시간 최소화
```

---

## 🎯 **즉시 적용 계획**

### **1단계: 현재 상황 정리 (10분)**
```bash
# 현재 app.py 상태 백업
copy app.py app_CURRENT_STATE_20250804_0857.py

# 마지막 정상 작동 버전 식별
# (서대리가 보고한 마지막 정상 시점)

# STABLE 버전 지정
copy [마지막_정상_버전] app_STABLE_20250804_0857_BASE.py
```

### **2단계: 서대리 교육 (15분)**
```
1. 형상관리 헌장 숙지
2. 백업 명령어 실습
3. 테스트 절차 실습
4. 롤백 절차 실습
```

### **3단계: 즉시 적용 (현재 작업부터)**
```
1. 서대리 현재 작업 중단
2. 형상관리 프로세스 적용하여 재시작
3. 노팀장 실시간 모니터링
4. 코코치 진행 상황 문서화
```

---

## 📜 **협업헌장 반영 제안**

### **V2.2 업데이트 항목**
```
🆕 추가 조항:
- 제7조: 핵심파일 형상관리 의무
- 제8조: 백업 생성 및 검증 절차
- 제9조: 긴급상황 대응 체계
- 제10조: 자동화 도구 활용 의무

🔄 수정 조항:
- 서대리 역할: 형상관리 프로세스 준수 의무 추가
- 노팀장 역할: 형상관리 감독 책임 추가
- 코코치 역할: 프로세스 문서화 책임 추가
```

---

## 🏆 **기대 효과**

### **단기 효과 (1주일 내)**
- ✅ 서대리 오류 발생률 0%
- ✅ 복구 시간 5분 이내 달성
- ✅ 개발 중단 사례 제로화

### **중기 효과 (1개월 내)**
- ✅ 예측 가능한 개발 일정 수립
- ✅ 코드 품질 표준화 달성
- ✅ 팀 전체 개발 효율성 향상

### **장기 효과 (3개월 내)**
- ✅ 완전 자동화된 형상관리 체계
- ✅ 다른 프로젝트 확장 적용
- ✅ AI 협업 분야 선도 모델 구축

---

## 💡 **결론 및 제안**

**조대표님의 지적이 완전히 정확합니다.**

서대리의 혼란은 개인 문제가 아닌 **시스템 부재의 결과**입니다. 

핵심파일 형상관리 헌장을 즉시 제정하여:
1. **원본 보호**: 정상 코드 절대 손실 방지
2. **단계별 관리**: 체계적 개발 프로세스
3. **즉시 복구**: 오류 발생시 신속 대응

**협업헌장 V2.2 반영을 강력히 추천합니다.**

---

**제정 완료**: 2025년 8월 4일 월요일 08:57 KST  
**노팀장 (기술팀장)**  
**조대표님 승인 대기 중**