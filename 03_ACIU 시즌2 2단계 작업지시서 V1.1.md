# ACIU 시즌2 2단계 작업지시서 V1.1 (수정판)

**발령시간**: 2025년 8월 2일 토요일 13:14 KST  
**발령자**: 조대표 (총괄)  
**주담당**: 노팀장 (기술팀장) - **65% 업무 비중**  
**지원**: 서대리 (Cursor AI) - **30% 업무 비중**  
**기록**: 코코치 (나실장) - **5% 정보공유 및 기록**  
**예상 소요시간**: 2시간 30분  
**브랜치**: season1-a

---

## 📝 **V1.1 주요 수정사항**
- **서대리 업무 시간 확대**: 20분 → 45분 (코코치/서대리 요청 반영)
- **7개 API 엔드포인트 구체 명시** (코코치 질문 해결)
- **시즌1 데이터 파일 확보 방안 추가** (서대리 질문 해결)
- **코코치 모니터링 방식 효율화** (코코치 건의 반영)
- **시간 스탬프 업데이트**: 13:14 KST 기준

---

## 🎯 **2단계 임무 개요**
**핵심 목표**: CSV 데이터를 JSON API 구조로 완전 전환 및 Flask 백엔드 고도화

---

## 📋 **노팀장 주도 업무 (65%)**

### **🔥 TASK A: 데이터 아키텍처 설계 (노팀장 전담)**
**소요시간**: 45분  
**중요도**: ★★★★★

#### **A-1: JSON 스키마 설계 (상세 명세)**
```json
{
  "version": "2.0",
  "last_updated": "2025-08-02T13:14:00Z",
  "categories": {
    "property_insurance": {
      "display_name": "재산보험",
      "question_count": 399,
      "file_source": "ins_1db.csv",
      "description": "일반재산보험 관련 문제"
    },
    "specialty_insurance": {
      "display_name": "특종보험", 
      "question_count": 292,
      "file_source": "ins_2db.csv",
      "description": "자동차보험 관련 문제"
    },
    "liability_insurance": {
      "display_name": "배상책임보험",
      "question_count": 268,
      "file_source": "ins_3db.csv",
      "description": "책임보험 관련 문제"
    },
    "marine_insurance": {
      "display_name": "해상보험",
      "question_count": 420,
      "file_source": "ins_4db.csv",
      "description": "해상보험 관련 문제"
    }
  },
  "questions": [
    {
      "id": "Q001",
      "qcode": "원본_QCODE",
      "category": "property_insurance",
      "type": "true_false",
      "question": "문제 내용",
      "answer": "O",
      "explanation": "해설 내용",
      "layer1": "재산보험",
      "layer2": "일반재산보험",
      "source": "원본 소스"
    }
  ]
}
```

#### **A-2: 7개 API 엔드포인트 설계 (구체 명세)**
1. `GET /api/v1/categories` - 카테고리 목록 및 메타데이터
2. `GET /api/v1/questions/<category>` - 카테고리별 문제 목록
3. `GET /api/v1/question/<id>` - 개별 문제 상세 조회
4. `POST /api/v1/stats` - 통계 업데이트 (updateAllStatistics 대체)
5. `GET /api/v1/stats/<user_id>` - 사용자별 통계 조회
6. `GET /api/v1/health` - 시스템 상태 확인
7. `POST /api/v1/migrate` - 시즌1 데이터 마이그레이션

### **🔥 TASK B: 핵심 백엔드 로직 구현 (노팀장 전담)**
**소요시간**: 60분  
**중요도**: ★★★★★

#### **B-1: DataManager 클래스 설계 (상세 스펙)**
```python
class DataManager:
    def __init__(self):
        self.questions_cache = {}
        self.categories_info = {}
        self.data_loaded = False
    
    def load_csv_to_json(self, csv_path, category_key):
        """
        CSV 파일을 JSON 문제 형식으로 변환
        
        Args:
            csv_path (str): CSV 파일 경로
            category_key (str): 카테고리 키 (property_insurance 등)
            
        Returns:
            dict: {
                "questions": [...],
                "category": category_key,
                "question_count": int
            }
        """
        pass
    
    def get_questions_by_category(self, category):
        """카테고리별 문제 반환"""
        pass
    
    def get_question_by_id(self, question_id):
        """개별 문제 조회"""
        pass
```

#### **B-2: 시즌1 통계 로직 재설계**
```python
class StatisticsManager:
    def __init__(self):
        self.user_stats = {}
    
    def update_statistics(self, user_id, question_id, is_correct, category):
        """시즌1 updateAllStatistics 로직 구현"""
        pass
    
    def get_user_statistics(self, user_id):
        """사용자 통계 조회"""
        pass
```

### **🔥 TASK C: 시즌1 데이터 확보 방안 (노팃장 전담)**
**소요시간**: 15분  
**중요도**: ★★★★☆

#### **C-1: 데이터 파일 확보 전략**
- 시즌1 프로젝트에서 CSV 파일 복사 방안
- 없을 경우 더미 데이터 생성 스크립트
- 데이터 무결성 검증 로직

---

## 📋 **서대리 지원 업무 (30%)**

### **🛠️ TASK D: 데이터 처리 구현** 
**소요시간**: 30분  
**담당**: 서대리 + 노팀장 리뷰 필수

#### **D-1: CSV 파싱 함수 구현 (노팀장 스펙 기반)**
```python
def parse_csv_to_questions(csv_file_path, category_key):
    """
    노팀장 설계 스펙에 따른 CSV → JSON 변환
    
    CSV 컬럼 매핑:
    - QCODE → qcode
    - QUESTION → question  
    - ANSWER → answer
    - EXPLAIN → explanation
    - LAYER1 → layer1
    - LAYER2 → layer2
    - SOURCE → source
    """
    pass

def create_test_csv():
    """테스트용 샘플 CSV 생성"""
    pass
```

#### **D-2: 단위 테스트 구현**
```python
def test_parse_csv_to_questions():
    """CSV 파싱 함수 테스트"""
    pass

def test_data_manager():
    """DataManager 클래스 테스트"""
    pass
```

### **🛠️ TASK E: Flask 라우팅 구현 지원**
**소요시간**: 15분  
**담당**: 서대리 + 노팀장 설계 준수

#### **E-1: 7개 엔드포인트 기본 구현**
- 노팀장 설계에 따른 라우팅 함수 작성
- 에러 핸들링 표준화 적용
- JSON 응답 형식 통일

---

## 📋 **코코치 정보공유 및 기록 업무 (5%)**

### **📝 TASK F: 효율적 모니터링 (코코치 건의 반영)**

#### **F-1: 이벤트 기반 진행률 추적**
- ~~30분마다 체크~~ → **작업 완료 시점별 체크**
- GitHub 푸시 완료 시 알림
- 각 TASK 완료 시 보고
- 이슈 발생 시에만 즉시 조대표 보고

#### **F-2: 시즌1 데이터 보존 방안 구체화**
- LocalStorage 데이터 내보내기 기능 설계
- 사용자 통계 마이그레이션 스크립트 계획
- 데이터 손실 방지 체크리스트 작성

---

## ⏰ **수정된 세부 일정표**

| 시간 | 담당자 | 작업 내용 | 완료 기준 |
|------|--------|-----------|-----------|
| 13:14-13:59 | 노팀장 | TASK A: 데이터 아키텍처 설계 | JSON 스키마 + 7개 API 설계 |
| 13:59-14:29 | 서대리 | TASK D: CSV 파싱 + 테스트 | 노팀장 리뷰 통과 |
| 14:29-15:29 | 노팀장 | TASK B: 백엔드 로직 구현 | DataManager + Statistics |
| 15:29-15:44 | 서대리 | TASK E: Flask 라우팅 구현 | 7개 엔드포인트 |
| 15:34-15:44 | 노팀장 | TASK C: 데이터 확보 방안 | 파일 확보 + 검증 |
| 13:14-15:44 | 코코치 | TASK F: 이벤트 기반 모니터링 | 진행률 + 보존방안 |

---

## 🗂️ **시즌1 데이터 파일 확보 방안**

### **우선순위 1: 기존 파일 활용**
```bash
# 현재 프로젝트에서 CSV 파일 확인
ls *.csv
find . -name "ins_*db.csv"
```

### **우선순위 2: 시즌1 프로젝트 복사**
```bash
# 시즌1 프로젝트에서 복사 (서대리 확인 필요)
cp ../season1/ins_1db.csv ./
cp ../season1/ins_2db.csv ./
cp ../season1/ins_3db.csv ./
cp ../season1/ins_4db.csv ./
```

### **우선순위 3: 테스트용 더미 데이터**
```python
# 서대리 구현: 최소 기능 테스트용 CSV 생성
def create_minimal_test_csv():
    """5개 문제씩 4개 카테고리 테스트 데이터"""
    pass
```

---

## ✅ **수정된 성공 기준**

### **노팀장 담당 (필수 달성)**
- [ ] **7개 API 엔드포인트** 설계 완료 (구체 명세 포함)
- [ ] **JSON 스키마** 4개 카테고리 포함 설계 완료
- [ ] **DataManager + StatisticsManager** 클래스 설계 완료
- [ ] **시즌1 데이터 확보** 방안 수립 완료
- [ ] **서대리 구현 코드 리뷰** 완료

### **서대리 담당 (노팀장 리뷰 필수)**
- [ ] **CSV 파싱 함수** 구현 + 테스트 (45분)
- [ ] **7개 엔드포인트 기본 구현** 완료
- [ ] **데이터 파일 확보** 또는 더미 데이터 생성
- [ ] **단위 테스트** 3개 이상 작성

### **코코치 담당**
- [ ] **이벤트 기반 진행률** 추적 보고서
- [ ] **시즌1 데이터 보존** 구체 방안 제시
- [ ] **기술 문서 정리** 완료

---

## 🚨 **중요 답변 사항 (코코치/서대리 질문 해결)**

### **📍 코코치 질문 답변**
1. **7개 엔드포인트**: 상기 A-2에서 구체 명시 완료
2. **POST /api/v1/stats**: 시즌1 updateAllStatistics 함수 완전 대체
3. **모니터링 방식**: 30분 주기 → 이벤트 기반으로 변경

### **📍 서대리 질문 답변**
1. **CSV 파일 위치**: TASK C에서 확보 방안 3단계 제시
2. **파싱 함수 스펙**: TASK D-1에서 컬럼 매핑 구체 명시
3. **업무 시간**: 20분 → 45분으로 확대
4. **코드 리뷰**: 각 TASK 완료 시점별 노팀장 리뷰

---

## 💪 **수정된 협업 체계**

**노팀장 권한 강화**:
- 모든 기술적 의사결정 및 설계 주도
- 서대리 구현 방향 구체적 가이드 제공
- 단계별 품질 검증 및 승인

**서대리 역할 확대**:
- 구현 시간 45분 확보
- 노팀장 설계 기반 충실한 구현
- 테스트 코드 작성 의무

**코코치 효율화**:
- 실시간 모니터링 부담 감소
- 핵심 이슈 중심 보고 체계
- 시즌1 데이터 보존 방안 기획

---

## 📊 **완료 보고 양식 (수정)**

**2단계 완료 시 노팀장 보고:**
```
✅ ACIU 시즌2 2단계 완료 보고 (V1.1)
- 완료 시간: [시:분]
- 노팀장 소요 시간: [분] / 120분
- 서대리 소요 시간: [분] / 45분  
- 7개 API 엔드포인트: [완료/미완료]
- JSON 스키마 (4개 카테고리): [완료/미완료]
- 시즌1 데이터 확보: [방식: 기존파일/복사/더미]
- 배포 URL: [Heroku URL]
- 코코치 보고사항: [이벤트별 진행률]
- 다음 단계 준비도: [%]
```

---

**V1.1 수정 완료**: 2025-08-02 13:14 KST  
**주담당**: 노팀장 (기술팀장)  
**코코치/서대리 의견 100% 반영**